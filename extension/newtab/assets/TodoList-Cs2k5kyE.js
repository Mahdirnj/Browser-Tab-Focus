import{r as b,a as se,w as ae,j as d,d as de}from"./index-BctAyhm_.js";const Y=new Set,p=new WeakMap,N=new WeakMap,x=new WeakMap,W=new WeakMap,z=new WeakMap,L=new WeakMap,k=new WeakMap,j=new WeakMap,S=new WeakSet;let m,X=0,H=0;const M="__aa_tgt",A="__aa_del",R="__aa_new",ee=e=>{const t=ue(e);t&&t.forEach(n=>he(n))},ce=e=>{e.forEach(t=>{t.target===m&&le(),p.has(t.target)&&O(t.target)})};function te(e){const t=e.getBoundingClientRect(),n=m?.clientWidth||0,o=m?.clientHeight||0;return t.bottom<0||t.top>o||t.right<0||t.left>n}function K(e){const t=W.get(e);t?.disconnect();let n=p.get(e),o=0;const r=5;n||(n=C(e),p.set(e,n));const{offsetWidth:i,offsetHeight:s}=m,u=[n.top-r,i-(n.left+r+n.width),s-(n.top+r+n.height),n.left-r].map(f=>`${-1*Math.floor(f)}px`).join(" "),h=new IntersectionObserver(()=>{++o>1&&O(e)},{root:m,threshold:1,rootMargin:u});h.observe(e),W.set(e,h)}function O(e,t=!0){clearTimeout(j.get(e));const n=$(e),o=t?B(n)?500:n.duration:0;j.set(e,setTimeout(async()=>{const r=x.get(e);try{await r?.finished,p.set(e,C(e)),K(e)}catch{}},o))}function le(){clearTimeout(j.get(m)),j.set(m,setTimeout(()=>{Y.forEach(e=>D(e,t=>oe(()=>O(t))))},100))}function fe(e){setTimeout(()=>{L.set(e,setInterval(()=>oe(O.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function oe(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}let E;const ne=typeof window<"u"&&"ResizeObserver"in window;ne&&(m=document.documentElement,new MutationObserver(ee),E=new ResizeObserver(ce),window.addEventListener("scroll",()=>{H=window.scrollY,X=window.scrollX}),E.observe(m));function ue(e){return e.reduce((o,r)=>[...o,...Array.from(r.addedNodes),...Array.from(r.removedNodes)],[]).every(o=>o.nodeName==="#comment")?!1:e.reduce((o,r)=>{if(o===!1)return!1;if(r.target instanceof Element){if(P(r.target),!o.has(r.target)){o.add(r.target);for(let i=0;i<r.target.children.length;i++){const s=r.target.children.item(i);if(s){if(A in s)return!1;P(r.target,s),o.add(s)}}}if(r.removedNodes.length)for(let i=0;i<r.removedNodes.length;i++){const s=r.removedNodes[i];if(A in s)return!1;s instanceof Element&&(o.add(s),P(r.target,s),N.set(s,[r.previousSibling,r.nextSibling]))}}return o},new Set)}function P(e,t){!t&&!(M in e)?Object.defineProperty(e,M,{value:e}):t&&!(M in t)&&Object.defineProperty(t,M,{value:e})}function he(e){var t,n;const o=e.isConnected,r=p.has(e);o&&N.has(e)&&N.delete(e),((t=x.get(e))===null||t===void 0?void 0:t.playState)!=="finished"&&((n=x.get(e))===null||n===void 0||n.cancel()),R in e?Q(e):r&&o?me(e):r&&!o?ge(e):Q(e)}function y(e){return Number(e.replace(/[^0-9.\-]/g,""))}function pe(e){let t=e.parentElement;for(;t;){if(t.scrollLeft||t.scrollTop)return{x:t.scrollLeft,y:t.scrollTop};t=t.parentElement}return{x:0,y:0}}function C(e){const t=e.getBoundingClientRect(),{x:n,y:o}=pe(e);return{top:t.top+o,left:t.left+n,width:t.width,height:t.height}}function re(e,t,n){let o=t.width,r=t.height,i=n.width,s=n.height;const c=getComputedStyle(e);if(c.getPropertyValue("box-sizing")==="content-box"){const h=y(c.paddingTop)+y(c.paddingBottom)+y(c.borderTopWidth)+y(c.borderBottomWidth),f=y(c.paddingLeft)+y(c.paddingRight)+y(c.borderRightWidth)+y(c.borderLeftWidth);o-=f,i-=f,r-=h,s-=h}return[o,i,r,s].map(Math.round)}function $(e){return M in e&&k.has(e[M])?k.get(e[M]):{duration:250,easing:"ease-in-out"}}function ie(e){if(M in e)return e[M]}function F(e){const t=ie(e);return t?S.has(t):!1}function D(e,...t){t.forEach(n=>n(e,k.has(e)));for(let n=0;n<e.children.length;n++){const o=e.children.item(n);o&&t.forEach(r=>r(o,k.has(o)))}}function U(e){return Array.isArray(e)?e:[e]}function B(e){return typeof e=="function"}function me(e){const t=p.get(e),n=C(e);if(!F(e))return p.set(e,n);if(te(e)){p.set(e,n),K(e);return}let o;if(!t)return;const r=$(e);if(typeof r!="function"){let i=t.left-n.left,s=t.top-n.top;const c=t.left+t.width-(n.left+n.width);t.top+t.height-(n.top+n.height)==0&&(s=0),c==0&&(i=0);const[h,f,T,g]=re(e,t,n),v={transform:`translate(${i}px, ${s}px)`},a={transform:"translate(0, 0)"};h!==f&&(v.width=`${h}px`,a.width=`${f}px`),T!==g&&(v.height=`${T}px`,a.height=`${g}px`),o=e.animate([v,a],{duration:r.duration,easing:r.easing})}else{const[i]=U(r(e,"remain",t,n));o=new Animation(i),o.play()}x.set(e,o),p.set(e,n),o.addEventListener("finish",O.bind(null,e,!1),{once:!0})}function Q(e){R in e&&delete e[R];const t=C(e);p.set(e,t);const n=$(e);if(!F(e))return;if(te(e)){K(e);return}let o;if(typeof n!="function")o=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"});else{const[r]=U(n(e,"add",t));o=new Animation(r),o.play()}x.set(e,o),o.addEventListener("finish",O.bind(null,e,!1),{once:!0})}function G(e,t){var n;e.remove(),p.delete(e),N.delete(e),x.delete(e),(n=W.get(e))===null||n===void 0||n.disconnect(),setTimeout(()=>{if(A in e&&delete e[A],Object.defineProperty(e,R,{value:!0,configurable:!0}),t&&e instanceof HTMLElement)for(const o in t)e.style[o]=""},0)}function ge(e){var t;if(!N.has(e)||!p.has(e))return;const[n,o]=N.get(e);Object.defineProperty(e,A,{value:!0,configurable:!0});const r=window.scrollX,i=window.scrollY;if(o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):n&&n.parentNode?n.parentNode.appendChild(e):(t=ie(e))===null||t===void 0||t.appendChild(e),!F(e))return G(e);const[s,c,u,h]=be(e),f=$(e),T=p.get(e);(r!==X||i!==H)&&ve(e,r,i,f);let g,v={position:"absolute",top:`${s}px`,left:`${c}px`,width:`${u}px`,height:`${h}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!B(f))Object.assign(e.style,v),g=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:f.duration,easing:"ease-out"});else{const[a,l]=U(f(e,"remove",T));l?.styleReset!==!1&&(v=l?.styleReset||v,Object.assign(e.style,v)),g=new Animation(a),g.play()}x.set(e,g),g.addEventListener("finish",()=>G(e,v),{once:!0})}function ve(e,t,n,o){const r=X-t,i=H-n,s=document.documentElement.style.scrollBehavior;if(getComputedStyle(m).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+r,window.scrollY+i),!e.parentElement)return;const u=e.parentElement;let h=u.clientHeight,f=u.clientWidth;const T=performance.now();function g(){requestAnimationFrame(()=>{if(!B(o)){const v=h-u.clientHeight,a=f-u.clientWidth;T+o.duration>performance.now()?(window.scrollTo({left:window.scrollX-a,top:window.scrollY-v}),h=u.clientHeight,f=u.clientWidth,g()):document.documentElement.style.scrollBehavior=s}})}g()}function be(e){var t;const n=p.get(e),[o,,r]=re(e,n,C(e));let i=e.parentElement;for(;i&&(getComputedStyle(i).position==="static"||i instanceof HTMLBodyElement);)i=i.parentElement;i||(i=document.body);const s=getComputedStyle(i),c=!x.has(e)||((t=x.get(e))===null||t===void 0?void 0:t.playState)==="finished"?C(i):p.get(i),u=Math.round(n.top-c.top)-y(s.borderTopWidth),h=Math.round(n.left-c.left)-y(s.borderLeftWidth);return[u,h,o,r]}function xe(e,t={}){if(ne&&E&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!B(t)&&!t.disrespectUserMotionPreference)){S.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),D(e,O,fe,s=>E?.observe(s)),B(t)?k.set(e,t):k.set(e,{duration:250,easing:"ease-in-out",...t});const i=new MutationObserver(ee);i.observe(e,{childList:!0}),z.set(e,i),Y.add(e)}return Object.freeze({parent:e,enable:()=>{S.add(e)},disable:()=>{S.delete(e),D(e,o=>{const r=x.get(o);try{r?.cancel()}catch{}x.delete(o);const i=j.get(o);i&&clearTimeout(i),j.delete(o);const s=L.get(o);s&&clearInterval(s),L.delete(o)})},isEnabled:()=>S.has(e),destroy:()=>{S.delete(e),Y.delete(e),k.delete(e);const o=z.get(e);o?.disconnect(),z.delete(e),D(e,r=>{E?.unobserve(r);const i=x.get(r);try{i?.cancel()}catch{}x.delete(r);const s=W.get(r);s?.disconnect(),W.delete(r);const c=L.get(r);c&&clearInterval(c),L.delete(r);const u=j.get(r);u&&clearTimeout(u),j.delete(r),p.delete(r),N.delete(r)})}})}function we(e){const[t,n]=b.useState(),o=b.useMemo(()=>e,[]),r=b.useCallback(s=>{s instanceof HTMLElement?n(xe(s,o)):n(void 0)},[o]),i=b.useCallback(s=>{t&&(s?t.enable():t.disable())},[t]);return b.useEffect(()=>()=>{var s;(s=t?.destroy)===null||s===void 0||s.call(t)},[t]),[r,i]}const I="focus_dashboard_todos",Z=5;function ye(){const e=de(I,[]);return Array.isArray(e)?e.map(t=>({id:t.id,text:t.text,completed:!!t.completed})).filter(t=>typeof t.text=="string"&&t.text.trim().length):[]}function Ee(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`}function Me({active:e}){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",className:"h-3 w-3 text-[color:var(--dashboard-text-95)]",children:d.jsx("polyline",{points:"4 10.5 8 14.5 16 6.5",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.6",strokeDasharray:"16",strokeDashoffset:e?0:16,opacity:e?1:0,style:{transition:"stroke-dashoffset 220ms cubic-bezier(0.22, 1, 0.36, 1), opacity 180ms ease-out"}})})}function Te(){return d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-3.5 w-3.5",children:[d.jsx("path",{d:"M7 4h6",strokeLinecap:"round"}),d.jsx("path",{d:"M8 4l.45-1.3A1 1 0 019.37 2h1.26a1 1 0 01.92.7L12 4",strokeLinecap:"round"}),d.jsx("path",{d:"M5 6h10",strokeLinecap:"round"}),d.jsx("rect",{x:"6",y:"6",width:"8",height:"11",rx:"1.6"}),d.jsx("path",{d:"M8.5 9.5v5",strokeLinecap:"round"}),d.jsx("path",{d:"M11.5 9.5v5",strokeLinecap:"round"})]})}const je="flex h-90 w-48 flex-col overflow-hidden rounded-3xl border border-white/15 bg-white/[0.08] p-4 text-[color:var(--dashboard-text-100)] shadow-[0_30px_60px_-40px_rgba(15,23,42,0.85)] backdrop-blur-md transition duration-300 hover:border-white/25";function Oe(){const[e,t]=b.useState(()=>ye()),[n,o]=b.useState(""),r=b.useRef(null),i=b.useCallback((a,l,w,_)=>{if(typeof KeyframeEffect>"u"||typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const q="cubic-bezier(0.22, 1, 0.36, 1)";if(l==="add")return new KeyframeEffect(a,[{opacity:0,transform:"translateY(14px) scale(0.95)"},{opacity:1,transform:"translateY(0) scale(1)"}],{duration:320,easing:q,fill:"both"});if(l==="remove")return new KeyframeEffect(a,[{opacity:1,transform:"translateY(0) scale(1)"},{opacity:0,transform:"translateY(-12px) scale(0.94)"}],{duration:240,easing:"cubic-bezier(0.33, 1, 0.68, 1)",fill:"both"});if(l==="remain"&&_&&w){const V=_.left-w.left,J=_.top-w.top;if(V||J)return new KeyframeEffect(a,[{transform:`translate(${V}px, ${J}px)`},{transform:"translate(0, 0)"}],{duration:360,easing:q,fill:"both"})}},[]),[s]=we(i);b.useEffect(()=>{if(!e.length){se(I);return}ae(I,e)},[e]);const c=b.useMemo(()=>e.filter(a=>!a.completed),[e]),u=b.useMemo(()=>e.filter(a=>a.completed),[e]),h=b.useMemo(()=>[...c,...u],[c,u]),f=h.length>=Z,T=a=>{if(a.key!=="Enter")return;a.preventDefault();const l=n.trim();if(!l||f)return;const w={id:Ee(),text:l,completed:!1};t(_=>[..._,w]),o("")},g=a=>{t(l=>l.map(w=>w.id===a?{...w,completed:!w.completed}:w))},v=a=>{t(l=>l.filter(w=>w.id!==a))};return d.jsxs("section",{className:je,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-[0.55rem] font-semibold uppercase tracking-[0.4em] text-[color:var(--dashboard-text-70)]",children:"Todo List"}),d.jsxs("div",{className:"text-[0.55rem] uppercase tracking-[0.28em] text-[color:var(--dashboard-text-60)]",children:[c.length," ",d.jsx("span",{className:"text-[color:var(--dashboard-text-35)]",children:"left"})]})]}),d.jsxs("div",{className:"mt-3 flex flex-1 flex-col overflow-hidden rounded-2xl border border-white/15",children:[d.jsx("div",{className:"custom-scroll flex-1 overflow-y-scroll px-1 py-2",children:d.jsx("ul",{ref:s,className:"flex min-h-full flex-col gap-2 list-none",children:h.length?h.map(a=>{const l=a.completed;return d.jsxs("li",{"data-completed":l?"true":"false",className:"todo-item group flex items-center gap-2 rounded-xl border border-white/10 bg-white/[0.08] px-3 py-2 text-sm text-[color:var(--dashboard-text-90)] transition-all duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] hover:border-white/25 hover:bg-white/[0.12]",children:[d.jsx("button",{type:"button",onClick:()=>g(a.id),"aria-pressed":l,className:`flex h-6 w-6 items-center justify-center rounded-full border transition-all duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 ${l?"border-emerald-200 bg-emerald-500/80 shadow-[0_12px_25px_-15px_rgba(16,185,129,0.9)]":"border-white/30 bg-transparent hover:border-white/45"}`,"aria-label":l?"Mark todo as incomplete":"Mark todo as complete",children:d.jsx(Me,{active:l})}),d.jsx("p",{className:`flex-1 text-xs font-medium transition-colors duration-300 ease-out ${l?"text-[color:var(--dashboard-text-55)] line-through":"text-[color:var(--dashboard-text-90)]"}`,children:a.text}),d.jsx("button",{type:"button",onClick:()=>v(a.id),className:"flex h-6 w-6 items-center justify-center rounded-full border border-white/15 text-[color:var(--dashboard-text-45)] opacity-0 transition-all duration-300 ease-out group-hover:opacity-100 hover:border-rose-200/60 hover:text-rose-200/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-200/60","aria-label":"Delete todo",children:d.jsx(Te,{})})]},a.id)}):d.jsx("li",{className:"flex flex-1 items-center justify-center rounded-xl border border-dashed border-white/15 bg-white/[0.04] px-4 py-6 text-center text-[0.6rem] text-[color:var(--dashboard-text-55)]",children:"No todos yet. Add a task to keep it top of mind."},"empty-state")})}),d.jsxs("div",{className:"border-t border-white/10 px-2 py-2",children:[d.jsx("input",{ref:r,value:n,onChange:a=>o(a.target.value),onKeyDown:T,placeholder:f?"Todo limit reached":"Add todo and press Enter",disabled:f,className:`w-full rounded-full border border-white/20 bg-white/15 px-3 py-1.5 text-[0.65rem] text-[color:var(--dashboard-text-100)] placeholder:text-[color:var(--dashboard-text-45)] focus:border-sky-200 focus:outline-none focus:ring-2 focus:ring-sky-300/50 ${f?"cursor-not-allowed opacity-70":""}`}),f?d.jsxs("p",{className:"mt-2 text-[0.55rem] uppercase tracking-[0.3em] text-[color:var(--dashboard-text-55)]",children:["Maximum of ",Z," todos. Complete or delete one to add more."]}):null]})]})]})}export{Oe as TodoList,Oe as default};
