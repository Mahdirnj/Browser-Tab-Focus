import{r as t,j as e}from"./index-BctAyhm_.js";const O="flex h-48 w-48 flex-col overflow-hidden rounded-3xl border border-white/15 bg-white/[0.08] p-4 text-[color:var(--dashboard-text-100)] shadow-[0_30px_60px_-40px_rgba(15,23,42,0.85)] backdrop-blur-md transition duration-300 hover:border-white/25",v=1500*1e3,$=300*1e3,I=900*1e3,k=4,c=()=>typeof window<"u",j=()=>typeof performance<"u"?performance.now():Date.now();function U(x){const o=Math.max(0,Math.round(x/1e3)),b=Math.floor(o/60),h=o%60;return`${b.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}function G({isObscured:x=!1}){const[o,b]=t.useState("focus"),[h,S]=t.useState(v),[l,w]=t.useState(v),[n,a]=t.useState(!1),[p,y]=t.useState(0),[A,_]=t.useState(!1),r=t.useRef(null),u=t.useRef(null),d=t.useRef(null),f=t.useCallback((s,i)=>{const m=s==="focus"?v:s==="longBreak"?I:$;if(b(s),S(m),w(m),!c()){a(!1);return}r.current!=null&&(window.cancelAnimationFrame(r.current),r.current=null),i?(u.current=j()+m,a(!0)):(u.current=null,a(!1))},[]),N=t.useCallback(()=>{o==="focus"?y(s=>{const i=s+1,m=i%k===0;return f(m?"longBreak":"shortBreak",!0),i}):f("focus",!0)},[o,f]);t.useEffect(()=>{if(!c())return;if(!n){r.current!=null&&(window.cancelAnimationFrame(r.current),r.current=null);return}const s=()=>{if(u.current==null){a(!1);return}const i=u.current-j();if(i<=0){w(0),r.current!=null&&(window.cancelAnimationFrame(r.current),r.current=null),a(!1),N();return}w(i),r.current=window.requestAnimationFrame(s)};return r.current=window.requestAnimationFrame(s),()=>{r.current!=null&&(window.cancelAnimationFrame(r.current),r.current=null)}},[n,N]),t.useEffect(()=>{if(c())return()=>{r.current!=null&&(window.cancelAnimationFrame(r.current),r.current=null),d.current!=null&&window.clearTimeout(d.current)}},[]);const R=t.useCallback(()=>{if(c()){if(n){a(!1);return}u.current=j()+l,a(!0)}},[n,l]),B=t.useCallback(()=>{d.current!=null&&c()&&window.clearTimeout(d.current),y(0),f("focus",!1),_(!0),c()&&(d.current=window.setTimeout(()=>{_(!1)},420))},[f]),L=t.useMemo(()=>o==="focus"?(p+1)%k===0?"Long Break":"Break":"Focus",[o,p]),M=t.useMemo(()=>U(l),[l]),T=t.useMemo(()=>p%k+1,[p]),g=62,C=2*Math.PI*g,D=h?Math.min(1,Math.max(0,l/h)):0,P=C*(1-D),F=o==="focus"?"stroke-emerald-300/90":o==="longBreak"?"stroke-sky-300/90":"stroke-cyan-300/90",E=o==="focus"?"shadow-[0_18px_35px_-20px_rgba(16,185,129,0.9)]":o==="longBreak"?"shadow-[0_18px_35px_-20px_rgba(14,165,233,0.9)]":"shadow-[0_18px_35px_-20px_rgba(6,182,212,0.9)]";return e.jsxs("section",{className:`${O} ${E}`,"aria-hidden":x?"true":void 0,"data-obscured":x?"true":"false",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[0.5rem] font-semibold uppercase tracking-[0.38em] text-[color:var(--dashboard-text-70)]",children:"Pomodoro"}),e.jsxs("p",{className:"mt-1 text-[0.5rem] uppercase tracking-[0.28em] text-[color:var(--dashboard-text-45)]",children:["Next: ",L]})]}),e.jsx("button",{type:"button",onClick:B,className:"group flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/8 text-[color:var(--dashboard-text-65)] transition hover:border-white/40 hover:text-[color:var(--dashboard-text-100)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60","aria-label":"Restart current cycle",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.6",className:"h-4 w-4",children:[e.jsx("path",{d:"M6.5 4.5L4 7l2.5 2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 7h5.2a4.8 4.8 0 11-4.5 6.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e.jsxs("div",{className:`relative  flex flex-1 items-center justify-center pomodoro-ring ${A?"pomodoro-ring--pulse":""}`,children:[e.jsxs("svg",{viewBox:"0 0 160 160",className:"h-36 w-36 text-[color:var(--dashboard-text-20)]",role:"presentation",children:[e.jsx("circle",{cx:"80",cy:"80",r:g,className:"fill-none stroke-current",strokeWidth:"10",strokeOpacity:"0.12"}),e.jsx("circle",{cx:"80",cy:"80",r:g,className:`pomodoro-progress fill-none ${F}`,strokeWidth:"10",strokeLinecap:"round",strokeDasharray:C,strokeDashoffset:P})]}),e.jsxs("div",{className:"pointer-events-none absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:`pomodoro-time text-xl font-semibold tracking-[0.18em] text-[color:var(--dashboard-text-100)] transition-opacity duration-300 ${n?"animate-none":"opacity-95"}`,children:M}),e.jsxs("span",{className:"mt-2 text-[0.45rem] uppercase tracking-[0.26em] text-[color:var(--dashboard-text-45)] transition-opacity duration-300 pomodoro-time-sub",children:["Cycle ",T]})]}),e.jsx("button",{type:"button",onClick:R,className:"pomodoro-play absolute inset-0 flex items-center justify-center text-xs font-semibold uppercase tracking-[0.32em] text-[color:var(--dashboard-text-85)] opacity-0 transition-opacity duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/80","aria-pressed":n,children:e.jsx("span",{className:"rounded-full border border-white/25 bg-white/15 px-4 py-2 text-[0.6rem] text-[color:var(--dashboard-text-100)] shadow-[0_18px_35px_-25px_rgba(148,163,184,0.9)]",children:n?"Pause":"Start"})})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsx("button",{type:"button",onClick:R,className:`rounded-full border px-3 py-2 text-[0.55rem] font-semibold uppercase tracking-[0.28em] transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/80 ${n?"border-white/25 bg-white/20 text-[color:var(--dashboard-text-100)] hover:border-white/35":"border-white/20 bg-white/10 text-[color:var(--dashboard-text-80)] hover:border-white/35 hover:text-[color:var(--dashboard-text-100)]"}`,"aria-pressed":n,children:n?"Pause":"Start"}),e.jsx("div",{})]})]})}export{G as PomodoroTimer,G as default};
